import math

# Parameters
r_photo = 0.017 #efficiency of photsynthesis, here 1.7%
r_auto = 0.3 
d_algae = 1.0
k = 0.6
enthalpy = 17284  # J/g of cellulose

# Define irradiance function (W/m²) depending on time of day (t in hours)
def I(t):
    # Example: bell curve centered at noon (12h), amplitude 600 W/m²
    return max(0, 600 * math.sin(math.pi * t / 12))

# Integrate irradiance over 24h (simple rectangle method, 1-hour steps)
dt = 3600  # seconds in one hour
irradiance_total = 0
for hour in range(24):
    irradiance_total += I(hour + 0.5) * dt  # mid-point rule

# Light attenuation and photic depth
zeu = 3 / k
light_integral = (1 - math.exp(-k * zeu)) / k

# Energy captured by photosynthesis (J/m²)
gpp_energy = d_algae * irradiance_total * light_integral * r_photo
gpp_mass = gpp_energy / enthalpy
npp_mass = gpp_mass * (1 - r_auto)

# Output
print(f"NPP: {round(npp_mass, 2)} g/m²")
